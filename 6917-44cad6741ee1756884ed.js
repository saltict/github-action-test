"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[6917],{16917:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F});var n=o(57801),l=o(53101),a=o(76412),i=o(61224),c=o(53483),s=o(47088),r=o(73160),u=o(65024),d=o(12162),p=o(90809),h=o(99656),g=o(17446),C=o(90727),f=o(77180),b=o(59513),m=o(55436),k=o(12574),A=o(39359),w=o(2784),B=o(76699),M=o(35185),y=o(73557),v=o(82575),T=o(68774),E=o(52322);function j(e){const t=e.accountAuthType;return"evm"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&(0,T.u)(e))).length:0:"substrate"===t?e.isAllowedMap?Object.entries(e.isAllowedMap).filter((([e,t])=>t&&!(0,T.u)(e))).length:0:Object.values(e.isAllowedMap).filter((e=>e)).length}const x="actionModalId",S="manage-website-access-filter-id";var Z=function(e){return e.SUBSTRATE="substrate",e.ETHEREUM="ethereum",e.BLOCKED="blocked",e.Connected="connected",e}(Z||{});const F=(0,v.ZP)((function({className:e=""}){const t=(0,M.v9)((e=>e.settings.authUrls)),{activeModal:o,inactiveModal:T}=(0,w.useContext)(d.t),{t:F}=(0,B.$)(),I=(0,y.s0)(),N=(0,s.Z)().goBack,{token:O}=(0,v.Fg)(),{filterSelectionMap:_,onApplyFilter:D,onChangeFilterOption:R,onCloseFilterModal:U,selectedFilters:L}=(0,c.R)(S),W=(0,w.useMemo)((()=>e=>{if(!L.length)return!0;for(const t of L)if(t===Z.SUBSTRATE){if("substrate"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===Z.ETHEREUM){if("evm"===e.accountAuthType||"both"===e.accountAuthType)return!0}else if(t===Z.BLOCKED){if(!e.isAllowed)return!0}else if(t===Z.Connected&&e.isAllowed)return!0;return!1}),[L]),Y=(0,w.useCallback)((()=>{o(S)}),[o]),z=(0,w.useMemo)((()=>[{label:F("Substrate dApp"),value:Z.SUBSTRATE},{label:F("Ethereum dApp"),value:Z.ETHEREUM},{label:F("Blocked dApp"),value:Z.BLOCKED},{label:F("Connected dApp"),value:Z.Connected}]),[F]),H=(0,w.useMemo)((()=>function(e){return Object.values(e)}(t)),[t]),K=(0,w.useCallback)((()=>{o(x)}),[o]),V=(0,w.useCallback)((()=>{T(x)}),[T]),P=(0,w.useMemo)((()=>[{key:"forget-all",icon:C.Z,iconBackgroundColor:O.colorWarning,title:F("Forget all"),onClick:()=>{(0,r.jO8)(u.NY).catch(console.error),V()}},{key:"disconnect-all",icon:f.Z,iconBackgroundColor:O["gray-3"],title:F("Disconnect all"),onClick:()=>{(0,r.IoV)(!1,u.NY).catch(console.error),V()}},{key:"connect-all",icon:b.Z,iconBackgroundColor:O["green-6"],title:F("Connect all"),onClick:()=>{(0,r.IoV)(!0,u.NY).catch(console.error),V()}}]),[V,F,O]),$=(0,w.useCallback)((e=>()=>{I("/settings/dapp-access-edit",{state:{siteName:e.origin,origin:e.id,accountAuthType:e.accountAuthType||""}})}),[I]),X=(0,w.useCallback)((e=>(0,E.jsx)(i.M,{accountCount:j(e),className:"__item",domain:e.id,onClick:$(e),siteName:e.origin||e.id},e.id)),[$]),q=(0,w.useCallback)((()=>(0,E.jsx)(l.Z,{emptyMessage:F("Your list of approved dApps will appear here."),emptyTitle:F("No dApps found"),phosphorIcon:m.Z})),[F]),G=(0,w.useCallback)(((e,t)=>{var o,n;const l=t.toLowerCase();return(null===(o=e.origin)||void 0===o?void 0:o.toLowerCase().includes(l))||(null===(n=e.id)||void 0===n?void 0:n.toLowerCase().includes(l))}),[]);return(0,E.jsx)(n.FE,{className:`manage-website-access ${e}`,children:(0,E.jsxs)(n.Ar.Base,{children:[(0,E.jsx)(p.Z,{background:"transparent",center:!0,onBack:N,paddingVertical:!0,rightButtons:[{icon:(0,E.jsx)(h.Z,{customSize:"24px",phosphorIcon:k.Z,type:"phosphor",weight:"bold"}),onClick:K}],showBackButton:!0,title:F("Manage website access")}),(0,E.jsx)(g.Z.Section,{actionBtnIcon:(0,E.jsx)(h.Z,{phosphorIcon:A.Z}),enableSearchInput:!0,filterBy:W,list:H,onClickActionBtn:Y,renderItem:X,renderWhenEmpty:q,searchFunction:G,searchMinCharactersCount:2,searchPlaceholder:F("Search or enter a website"),showActionBtn:!0}),(0,E.jsx)(a.W,{actions:P,id:x,onCancel:V,title:F("Access configuration")}),(0,E.jsx)(n.Dd,{id:S,onApplyFilter:D,onCancel:U,onChangeOption:R,optionSelectionMap:_,options:z,title:F("Filter")})]})})})).withConfig({displayName:"ManageWebsiteAccess",componentId:"sc-mezssz-0"})((({theme:{token:e}})=>({height:"100%",backgroundColor:e.colorBgDefault,display:"flex",flexDirection:"column",".ant-sw-list-section":{paddingTop:e.padding,flex:1,marginBottom:e.margin},".ant-sw-list-section .ant-sw-list":{paddingBottom:0},".__item + .__item":{marginTop:e.marginXS}})))}}]);