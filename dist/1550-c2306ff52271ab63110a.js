"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[1550],{11550:(e,s,n)=>{n.r(s),n.d(s,{default:()=>Q});var t=n(89335),i=n(57801),o=n(80855),r=n(80588),a=n(59566),c=n(68627),l=n(3612),d=n(5772),h=n(81620),g=n(28973),m=n(88528),u=n(28347),p=n(21462),x=n(47088),f=n(73160),j=n(27178),Z=n(99656),b=n(12162),k=n(79385),w=n(67243),C=n(92280),H=n(72779),S=n.n(H),v=n(18332),y=n(8175),N=n(6746),_=n(2784),I=n(76699),z=n(82575),E=n(52322);const L=(0,E.jsx)(Z.Z,{phosphorIcon:v.Z,weight:"fill"}),T="import-qr-code-scanner-modal",Q=(0,z.ZP)((e=>{(0,p.Z)();const{className:s}=e,{t:n}=(0,I.$)(),{goHome:H}=(0,x.Z)(),v=(0,h.Z)(),z=(0,d.Z)(),Q=(0,g.Z)(c.Rt),R=(0,m.Z)(),{inactiveModal:q}=(0,_.useContext)(b.t),{isWebUI:D}=(0,_.useContext)(l.sG),[W,A]=(0,_.useState)({}),[P,X]=(0,_.useState)(!1),$=(0,_.useCallback)((e=>{X(!0),q(T),A({message:"",status:"success"}),setTimeout((()=>{var s;(s=e,new Promise(((e,n)=>{(0,f.kz1)(s.genesisHash,s.content).then((({isEthereum:s,isValid:t})=>{t?e(s):n(new Error("Invalid qr"))})).catch((e=>{n(e)}))}))).then((s=>{(0,f.mrk)({name:v,isAllow:!0,secretKey:e.content,publicKey:e.genesisHash,isEthereum:s}).then((({errors:e,success:s})=>{s?(A({}),z()):A({message:e[0].message,status:"error"})})).catch((e=>{A({message:e.message,status:"error"})})).finally((()=>{X(!1)}))})).catch((e=>{A({message:e.message,status:"error"}),X(!1)}))}),300)}),[q,v,z]),{onClose:B,onError:G,onSuccess:F,openCamera:K}=(0,u.Z)(T,j.jD,A,$),M=(0,_.useCallback)((()=>{R().then((()=>{setTimeout((()=>{K()}),300)})).catch((()=>{}))}),[R,K]),O={children:n(P?"Creating":"Scan the QR code"),icon:L,onClick:M,loading:P};return(0,E.jsx)(i.FE,{className:S()(s),children:(0,E.jsx)(i.Ar.WithSubHeaderOnly,{onBack:Q,rightFooterButton:D?void 0:{children:n(P?"Creating":"Scan QR"),icon:L,onClick:K,loading:P},subHeaderIcons:[{icon:(0,E.jsx)(o.Z,{}),onClick:H}],title:n("Import by QR code"),children:(0,E.jsxs)("div",{className:S()("container",{"__web-ui":D}),children:[(0,E.jsx)("div",{className:"sub-title",children:n("Please make sure that you have granted SubWallet the access to your device's camera.")}),(0,E.jsx)("div",{className:"logo",children:(0,E.jsx)(r.Z,{leftLogo:(0,E.jsx)(k.Z,{height:56,shape:"squircle",src:t.ZP.subwallet,width:56}),linkIcon:(0,E.jsx)(Z.Z,{phosphorIcon:y.Z,size:"md"}),rightLogo:(0,E.jsx)(k.Z,{height:56,shape:"squircle",src:t.ss.__qr_code__,width:56})})}),(0,E.jsx)("div",{className:"instruction",children:(0,E.jsxs)("div",{className:"instruction",children:[(0,E.jsxs)("span",{children:[n('Click the "Scan QR" button, or read')," "]}),(0,E.jsx)("a",{className:"link",href:"#",children:n("this instruction")}),(0,E.jsx)("span",{children:", "}),(0,E.jsx)("span",{children:n("for more details.")})]})}),W.message&&(0,E.jsxs)("div",{className:"error-container",children:[(0,E.jsx)(Z.Z,{customSize:"28px",phosphorIcon:N.Z,weight:"fill"}),(0,E.jsx)("span",{className:"error-content",children:W.message})]}),(0,E.jsx)(w.Z,{className:s,id:T,isError:!!W.status,onClose:B,onError:G,onSuccess:F,overlay:W.message&&(0,E.jsx)(a.Z,{message:W.message}),selectCameraMotion:D?"move-right":void 0,title:n("Scan QR")}),D&&(0,E.jsx)(C.Z,{...O,className:"action"})]})})})})).withConfig({displayName:"ImportQrCode",componentId:"sc-1frgihv-0"})((({theme:{extendToken:e,token:s}})=>({".__web-ui":{width:e.oneColumnWidth,maxWidth:"100%",margin:"0 auto"},".container":{padding:s.padding,"& .ant-btn":{width:"100%",marginTop:36}},".sub-title":{padding:`0 ${s.padding}px`,fontSize:s.fontSizeHeading6,lineHeight:s.lineHeightHeading6,color:s.colorTextDescription,textAlign:"center"},".logo":{margin:`${s.controlHeightLG}px 0`,"--logo-size":s.controlHeightLG+s.controlHeightXS},".instruction":{padding:`0 ${s.padding}px`,marginBottom:s.margin,fontSize:s.fontSizeHeading6,lineHeight:s.lineHeightHeading6,color:s.colorTextDescription,textAlign:"center"},".link":{color:s.colorLink,textDecoration:"underline"},".error-container":{color:s.colorError,display:"flex",flexDirection:"row",alignItems:"center",marginTop:s.marginXXL-2,justifyContent:"center"},".error-content":{marginLeft:s.marginXS,fontSize:s.fontSizeHeading6,lineHeight:s.lineHeightHeading6}})))}}]);