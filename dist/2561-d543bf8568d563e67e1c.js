"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[2561],{42561:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var a=s(57801),o=s(45868),n=s(80855),i=s(48118),r=s(32204),l=s(68627),c=s(3612),d=s(5772),u=s(28973),m=s(43246),p=s(88528),h=s(21462),g=s(47088),f=s(73160),x=s(64165),y=s(99656),w=s(12162),j=s(12798),b=s(76495),S=s(1072),k=s(61882),I=s(92280),N=s(17446),Z=s(40674),v=s(72779),C=s.n(v),J=s(90837),P=s(89537),H=s(2784),O=s(73557),_=s(82575),T=s(42445),$=s(52322),B=s(48834).Buffer;const D=(0,$.jsx)(y.Z,{phosphorIcon:J.Z,weight:"fill"}),z="account-json-modal",F="restore-json-file-form",R="password",W=[{title:"What is a JSON?",description:"The JSON backup file stores your account's information encrypted with the account's password. It's a second recovery method additionally to the mnemonic phrase. "},{title:"How to export your JSON backup file",description:(0,$.jsxs)("span",{children:["When you create your account directly on Polkadot-JS UI the JSON file is automatically downloaded to your Downloads folder.",(0,$.jsx)("br",{}),"If you create your account in the Polkadot extension, you need to manually export the JSON file.",(0,$.jsx)("br",{}),"In ",(0,$.jsx)("a",{href:"#",children:"this article"})," you will learn how to manually export your JSON backup file in the Polkadot extension and Polkadot-JS UI."]})}],E=(0,_.ZP)((function({className:e}){(0,h.Z)();const{t}=(0,m.Z)(),s=(0,d.Z)(),v=(0,O.s0)(),J=(0,u.Z)(l.Rt),{goHome:_}=(0,g.Z)(),{activeModal:E,inactiveModal:L}=(0,H.useContext)(w.t),{isWebUI:U}=(0,H.useContext)(c.sG),[A]=j.Z.useForm(),[G,M]=(0,H.useState)({}),[X,q]=(0,H.useState)({}),[K,Q]=(0,H.useState)(!1),[V,Y]=(0,H.useState)(!1),[ee,te]=(0,H.useState)(!1),[se,ae]=(0,H.useState)(""),[oe,ne]=(0,H.useState)(void 0),[ie,re]=(0,H.useState)([]),le=(0,p.Z)(),ce=(0,H.useCallback)((()=>{L(z)}),[L]),de=(0,H.useCallback)((()=>{E(z)}),[E]),ue=(0,H.useCallback)((e=>{var s;K||(Q(!0),null===(s=e.file.originFileObj)||void 0===s||s.arrayBuffer().then((e=>{let s;try{if(s=JSON.parse((0,T.z)(Uint8Array.from(B.from(e)))),JSON.stringify(oe)===JSON.stringify(s))return void Q(!1);re([]),ae(""),ne(s)}catch(e){return M({status:"error",message:e.message}),Q(!1),void te(!1)}try{if(q({}),(0,x.R)(s)){const e=s.accounts.map((e=>({address:e.address,genesisHash:e.meta.genesisHash,name:e.meta.name})));te(!0),re(e),M({}),Q(!1)}else(0,f.$G6)(s).then((e=>{te(!0),re([e]),M({}),Q(!1)})).catch((e=>{te(!1),M({status:"error",message:e.message}),Q(!1)}))}catch(e){M({status:"error",message:t("Invalid Json file")}),Q(!1),te(!1)}})).catch((e=>{M({status:"error",message:e.message}),Q(!1)})))}),[t,oe,K]),me=(0,H.useCallback)((()=>{oe&&(ee&&!se||le().then((()=>{Y(!0),setTimeout((()=>{const e=(0,x.R)(oe);(e?(0,f.Ka6)(oe,se,ie,!0):(0,f.k1v)({file:oe,password:se,address:ie[0].address,isAllowed:!0,withMasterPassword:!0})).then((()=>{setTimeout((()=>{e?v("/keyring/migrate-password"):s()}),1e3)})).catch((e=>{q({message:e.message,status:"error"}),setTimeout((()=>{const e=document.getElementById(`${F}_${R}`);e&&e.select()}),10)})).finally((()=>{Y(!1)}))}),500)})).catch((()=>{})))}),[oe,ee,se,le,ie,v,s]),pe=(0,H.useCallback)((e=>(0,$.jsx)(Z.Z,{accountName:e.name,address:e.address,addressPreLength:4,addressSufLength:5,avatarIdentPrefix:42,avatarTheme:"ethereum"===e.type?"ethereum":"polkadot",className:"account-item"},e.address)),[]),he=(0,H.useCallback)((e=>{const s=e.target.value;q(s?{}:{message:t("Password is required"),status:"error"}),ae(s)}),[t]);(0,H.useEffect)((()=>{ee&&setTimeout((()=>{const e=document.getElementById(`${F}_${R}`);e&&e.focus()}),10)}),[ee]);const ge={children:t("Import account"),icon:D,onClick:A.submit,disabled:!!G.status||!!X.status||!se,loading:K||V};return(0,$.jsx)(a.FE,{className:C()(e),children:(0,$.jsx)(a.Ar.WithSubHeaderOnly,{onBack:J,rightFooterButton:U?void 0:{children:t("Import by JSON file"),icon:D,onClick:A.submit,disabled:!!G.status||!!X.status||!se,loading:K||V},subHeaderIcons:[{icon:(0,$.jsx)(n.Z,{}),onClick:_}],title:t("Import from Polkadot.{js}"),children:(0,$.jsxs)("div",{className:C()("layout-container",{"__web-ui":U}),children:[(0,$.jsxs)("div",{className:C()("import-container"),children:[(0,$.jsx)("div",{className:"description",children:t("Drag and drop the JSON file you exported from Polkadot.{js}")}),(0,$.jsxs)(j.Z,{className:"form-container",form:A,name:F,onFinish:me,children:[(0,$.jsx)(j.Z.Item,{validateStatus:G.status,children:(0,$.jsx)(b.Z.SingleFileDragger,{accept:"application/json",className:"file-selector",disabled:K,hint:t("Drag and drop the JSON file you exported from Polkadot.{js}"),onChange:ue,statusHelp:G.message,title:t("Import by JSON file")})}),!!ie.length&&(0,$.jsx)(j.Z.Item,{children:ie.length>1?(0,$.jsx)(S.Z,{className:"account-list-item",leftItemIcon:(0,$.jsx)(o.Z,{accounts:ie}),name:t("Import {{number}} accounts",{replace:{number:String(ie.length).padStart(2,"0")}}),onPressItem:de,rightItem:(0,$.jsx)(y.Z,{phosphorIcon:P.Z,size:"sm"})}):(0,$.jsx)(S.Z,{className:"account-list-item",leftItemIcon:(0,$.jsx)(o.Z,{accounts:ie}),name:ie[0].name})}),ee&&(0,$.jsxs)(j.Z.Item,{validateStatus:X.status,children:[(0,$.jsx)("div",{className:"input-label",children:t("Please enter the password you have used when creating your Polkadot.{js} account")}),(0,$.jsx)(k.Z,{id:`${F}_${R}`,onChange:he,placeholder:t("Password"),statusHelp:X.message,type:"password",value:se})]}),U&&(0,$.jsx)(I.Z,{...ge,className:"action"})]}),(0,$.jsx)(r.I,{className:e,id:z,onCancel:ce,title:t("Import list"),children:(0,$.jsx)(N.Z.Section,{displayRow:!0,list:ie,renderItem:pe,rowGap:"var(--row-gap)"})})]}),U&&(0,$.jsx)(i.Z,{contents:W})]})})})})).withConfig({displayName:"RestoreJson__ImportJson",componentId:"sc-owdwlk-0"})((({theme:{extendToken:e,token:t}})=>({"--row-gap":`${t.sizeXS}px`,".layout-container":{paddingLeft:t.padding,paddingRight:t.padding,"&.__web-ui":{display:"flex",justifyContent:"center",width:e.twoColumnWidth,maxWidth:"100%",gap:t.size,margin:"0 auto"},".import-container":{paddingBottom:0,flex:1,"& .ant-btn":{width:"100%"}},".instruction-container":{flex:1}},".description":{fontSize:t.fontSizeHeading6,lineHeight:t.lineHeightHeading6,color:t.colorTextDescription},".form-container":{marginTop:t.margin},".ant-form-item:last-child":{marginBottom:0},".input-label":{fontSize:t.fontSizeHeading6,lineHeight:t.lineHeightHeading6,color:t.colorTextDescription,marginBottom:t.margin},".account-list-item":{marginTop:-t.marginXS,".account-item":{cursor:"default"},".ant-web3-block-right-item":{marginRight:0}},".ant-web3-block":{display:"flex !important"},".ant-sw-modal-body":{padding:`${t.padding}px 0 ${t.padding}px`,flexDirection:"column",display:"flex"},".ant-sw-list-wrapper":{overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},".file-selector":{".ant-upload-drag-single":{height:168}}})))},48118:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(57801),o=s(72779),n=s.n(o),i=(s(2784),s(76699)),r=s(82575),l=s(52322);const c=(0,r.ZP)((({className:e,contents:t})=>{const{t:s}=(0,i.$)();return t.length<=0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:n()("instruction-container",e),children:t.map(((e,t)=>(0,l.jsx)(a.e3,{description:"string"==typeof e.description?s(e.description):e.description,title:s(e.title),type:e.type||"warning"},t)))})})).withConfig({displayName:"InstructionContainer",componentId:"sc-1tjn6f7-0"})((({theme:{token:e}})=>({display:"flex",flexDirection:"column",gap:10,".alert-title.alert-title":{color:e.colorTextLight1}})))}}]);