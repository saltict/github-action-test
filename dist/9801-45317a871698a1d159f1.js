"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[9801],{29801:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(80949),n=s(36926),l=s(56858),c=s(57801),o=s(75576),r=s(43557),i=s(73160),d=s(63910),m=s(12798),u=s(99656),p=s(90809),h=s(61882),f=s(94344),g=s(2784),b=s(73557),y=s(82575),x=s(61162),N=s(68774),k=s(52322);function C(e){if(!e)return[];const t=(0,n.g6)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const w=(0,y.ZP)((function({className:e="",modalContent:t,onSubmitCallback:s}){const{t:y}=(0,r.$G)(),w=(0,r.lm)(),F=(0,b.s0)(),_=(0,g.useContext)(o.R0),j=(0,r.c_)(),[A]=m.Z.useForm(),I=m.Z.useWatch("chain",A),T=m.Z.useWatch("type",A),v=m.Z.useWatch("collectionName",A),S=(0,g.useMemo)((()=>Object.values(j)),[j]),Z=(0,r.xo)(I),[E,R]=(0,g.useState)(!1),[B,P]=(0,g.useState)(!0),[V,W]=(0,g.useState)(!0),H=(0,g.useMemo)((()=>C(j[I])),[j,I]),O=(0,r.vI)(),U=(0,g.useCallback)((()=>{t?null==s||s():F("/home/nfts/collections")}),[t,F,s]),J=(0,g.useCallback)(((e,t)=>{const{error:s}=(0,d.ij)(t),a=(0,d.eW)(e),n=(0,d.eW)(t),l=(0,d.s_)(t),c=Object.entries(n).some((([e,t])=>"symbol"!==e&&!t)),{chain:o,type:r}=a;if(o){const e=C(j[o]);1===e.length?A.setFieldValue("type",e[0].value):A.resetFields(["type"]),A.resetFields(["contractAddress","collectionName"])}r&&A.resetFields(["contractAddress","collectionName"]),l.contractAddress.length>0&&A.resetFields(["collectionName"]),W(!n.chain||!n.type||l.contractAddress.length>0),P(c||s)}),[j,A]),M=(0,g.useCallback)((e=>{const{chain:t,contractAddress:s,symbol:a,type:c}=e,o=v.replaceAll(" ","").toUpperCase(),r=(0,l.k1)(s,Z);R(!0),setTimeout((()=>{(0,i.fxK)({originChain:t,slug:"",name:v,symbol:""!==a?a:o,decimals:null,priceId:null,minAmount:null,assetType:c,metadata:(0,n.ST)(r),multiChainAsset:null,hasValue:(0,n.nO)(j[t]),icon:""}).then((e=>{e?(w({message:y("Imported NFT successfully")}),U()):w({message:y("An error occurred, please try again")})})).catch((()=>{w({message:y("An error occurred, please try again")})})).finally((()=>{R(!1)}))}),300)}),[v,Z,j,w,y,U]),Y=(0,g.useCallback)(((e,t)=>new Promise(((e,s)=>{t.replaceAll(" ","").length>=3?e():s(new Error(y("Collection name must have at least 3 characters")))}))),[y]),q=(0,g.useCallback)(((e,t)=>new Promise(((e,s)=>{if((0,x.U)(t)){const n=[a.Ym.ERC721].includes(T)&&(0,N.u)(t),c=[a.Ym.PSP34].includes(T)&&(0,l.NJ)(t),o=(0,l.k1)(t,Z);n||c?(R(!0),(0,i.UjR)({contractAddress:o,originChain:I,type:T}).then((t=>{R(!1),t.isExist&&s(y("Existed NFT")),t.contractError&&s(y("Invalid contract for the selected chain")),t.isExist||t.contractError||(A.setFieldValue("collectionName",t.name),A.setFieldValue("symbol",t.symbol),e())})).catch((()=>{R(!1),s(y("Invalid contract for the selected chain"))}))):s(y("Invalid contract address"))}else s(y("Invalid contract address"))}))),[Z,A,I,T,y]);return(0,g.useEffect)((()=>{I&&O(I)}),[I,O]),(0,k.jsx)(c.FE,{className:e,resolve:_.awaitStores(["nft"]),children:(0,k.jsxs)(c.Ar.Base,{onBack:U,rightFooterButton:{disabled:B,icon:(0,k.jsx)(u.Z,{phosphorIcon:f.Z,weight:"fill"}),loading:E,onClick:A.submit,children:y("Import")},title:y("Import NFT"),children:[!t&&(0,k.jsx)(p.Z,{background:"transparent",center:!0,className:"transaction-header",onBack:U,paddingVertical:!0,showBackButton:!0,title:y("Import NFT")}),(0,k.jsx)("div",{className:"nft_import__container",children:(0,k.jsxs)(m.Z,{className:"form-space-xs",form:A,initialValues:{contractAddress:"",chain:"",collectionName:"",type:""},name:"nft-import",onFieldsChange:J,onFinish:M,children:[(0,k.jsx)(m.Z.Item,{name:"chain",children:(0,k.jsx)(c.oT,{items:S,label:y("Network"),placeholder:y("Select network"),title:y("Select network")})}),(0,k.jsx)(m.Z.Item,{name:"type",children:(0,k.jsx)(c.Rf,{className:e,disabled:!I,items:H,label:y("Type"),placeholder:y("Select NFT type"),title:y("Select NFT type")})}),(0,k.jsx)(m.Z.Item,{name:"contractAddress",rules:[{validator:q}],statusHelpAsTooltip:!0,children:(0,k.jsx)(c.Jg,{addressPrefix:Z,disabled:!T,label:y("Contract address"),placeholder:y("Enter or paste an address"),showScanner:!0})}),(0,k.jsx)(m.Z.Item,{name:"collectionName",required:!0,rules:[{validator:Y}],statusHelpAsTooltip:!0,children:(0,k.jsx)(h.Z,{disabled:V,label:y("NFT collection name")})})]})})]})})})).withConfig({displayName:"NftImport",componentId:"sc-h8ppt5-0"})((({theme:{token:e}})=>({".nft_import__container":{marginTop:e.margin,paddingLeft:e.padding,paddingRight:e.padding},".nft_import__Qr":{cursor:"pointer"},".ant-web3-block-right-item":{marginRight:0},".ant-input-suffix":{marginRight:0},".nft_import__selected_option":{color:e.colorTextHeading},".nft-type-item":{"--nft-type-icon-bg-color":e["orange-6"],"--nft-type-icon-color":e.colorWhite,"--nft-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}}})))}}]);