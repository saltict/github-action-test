"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[5072],{5072:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(57801),o=s(50334),a=s(68627),i=s(67145),r=s(3612),l=s(43246),c=s(70497),d=s(73160),p=s(48062),u=s(96701),h=s(68655),m=s(99656),w=s(12162),g=s(12798),f=s(95023),x=s(61882),S=s(92280),j=s(80039),y=s(72779),C=s.n(y),b=s(75720),v=s(93452),Z=s(28394),k=s(2784),I=s(35185),P=s(73557),W=s(82575),N=s(48118),A=s(52322),O=function(e){return e.PASSWORD="password",e.CONFIRM_PASSWORD="confirm_password",e}(O||{});const D=(0,A.jsx)(m.Z,{phosphorIcon:b.Z,weight:"fill"}),R="create-password-instruction-modal",_=(0,W.ZP)((({className:e})=>{const{t}=(0,l.Z)(),{activeModal:s,checkActive:y,inactiveModal:b}=(0,k.useContext)(w.t),{isWebUI:W}=(0,k.useContext)(r.sG),_=(0,P.s0)(),F=(0,P.TH)().state,{accounts:M}=(0,I.v9)((e=>e.accountState)),[H]=(0,k.useState)((0,p.MS)(M)),T=(0,k.useMemo)((()=>(0,h.tK)(t("Password"),t)),[t]),B=(0,k.useMemo)((()=>(0,h._B)(O.PASSWORD,t)),[t]),[z]=g.Z.useForm(),[E,U]=(0,k.useState)(!0),[Y,$]=(0,k.useState)(""),[G,K]=(0,k.useState)(!1),L=(0,k.useMemo)((()=>[{title:"Why do I need to enter a password?",description:"For your wallet protection, SubWallet locks your wallet after 15 minutes of inactivity. You will need this password to unlock it.",type:W?"warning":"info"},{title:"Can I recover a password?",description:"The password is stored securely on your device. We will not be able to recover it for you, so make sure you remember it!",type:W?"warning":"info"}]),[W]),V=(0,k.useCallback)((()=>{null!=F&&F.prevPathname?_(F.prevPathname,{state:F.prevState}):_(i.Y)}),[_,null==F?void 0:F.prevPathname,null==F?void 0:F.prevState]),X=(0,k.useCallback)((e=>{const t=e[O.PASSWORD];t&&(K(!0),(0,d.jSj)({createNew:!0,newPassword:t}).then((e=>{null!=e&&e.status?V():$(e.errors[0])})).catch((e=>{$(e.message)})).finally((()=>{K(!1)})))}),[V]),q=(0,k.useCallback)(((e,t)=>{const{empty:s,error:n}=(0,u.ij)(t);$(""),U(n||s)}),[]),J=(0,k.useCallback)((()=>{z.resetFields([O.CONFIRM_PASSWORD])}),[z]),Q=(0,k.useCallback)((()=>{s(R)}),[s]),ee=(0,k.useCallback)((()=>{b(R)}),[b]);return(0,k.useEffect)((()=>{H||W||s(a.hD)}),[s,W,H]),(0,c.Z)(z,O.PASSWORD,!y(a.hD)),(0,A.jsx)(n.FE,{className:C()(e),children:(0,A.jsx)(n.Ar.WithSubHeaderOnly,{rightFooterButton:W?void 0:{children:t("Continue"),onClick:z.submit,loading:G,disabled:E,icon:D},showBackButton:H,subHeaderIcons:[{icon:(0,A.jsx)(o.Z,{}),onClick:Q}],title:t("Create a password"),children:(0,A.jsxs)("div",{className:C()("body-container",{"__web-ui":W}),children:[!W&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"page-icon",children:(0,A.jsx)(f.Z,{color:"var(--page-icon-color)",iconProps:{weight:"fill",phosphorIcon:v.Z}})}),(0,A.jsx)("div",{className:"title",children:t("Create a password")})]}),(0,A.jsx)("div",{className:"form-container",children:(0,A.jsxs)(g.Z,{form:z,initialValues:{[O.PASSWORD]:"",[O.CONFIRM_PASSWORD]:""},name:"create-password-form",onFieldsChange:q,onFinish:X,children:[(0,A.jsx)(g.Z.Item,{name:O.PASSWORD,rules:T,statusHelpAsTooltip:!0,children:(0,A.jsx)(x.Z,{onChange:J,placeholder:t("Enter password"),type:"password"})}),(0,A.jsx)(g.Z.Item,{name:O.CONFIRM_PASSWORD,rules:B,statusHelpAsTooltip:!0,children:(0,A.jsx)(x.Z,{placeholder:t("Confirm password"),type:"password"})}),(0,A.jsx)(g.Z.Item,{children:(0,A.jsx)(n.e3,{description:t("8 characters at least. Uppercase, numbers, and special characters are recommended."),title:t("Always choose a strong password!"),type:"warning"})}),Y&&(0,A.jsx)(g.Z.Item,{help:Y,validateStatus:"error"}),W&&(0,A.jsx)(S.Z,{disabled:E,icon:D,loading:G,onClick:z.submit,children:t("Continue")})]})}),(0,A.jsx)("div",{className:"instruction-container",children:W?(0,A.jsx)(N.Z,{contents:L}):(0,A.jsx)(j.ZP,{closeIcon:(0,A.jsx)(m.Z,{phosphorIcon:Z.Z,size:"sm"}),id:R,onCancel:ee,rightIconProps:{icon:(0,A.jsx)(o.Z,{})},title:t("Instructions"),wrapClassName:e,children:(0,A.jsx)(N.Z,{contents:L})})})]})})})})).withConfig({displayName:"CreatePassword",componentId:"sc-y8wcce-0"})((({theme:{extendToken:e,token:t}})=>({".__web-ui":{display:"flex",justifyContent:"center",gap:16,"& > *":{flex:1},".form-container":{".ant-btn":{width:"100%"}}},".body-container":{padding:`0 ${t.padding}px`,textAlign:"center",width:e.twoColumnWidth,maxWidth:"100%",margin:"0 auto",".page-icon":{display:"flex",justifyContent:"center",marginTop:t.margin,"--page-icon-color":t.colorSecondary},".title":{marginTop:t.margin,marginBottom:2*t.margin,fontWeight:t.fontWeightStrong,fontSize:t.fontSizeHeading3,lineHeight:t.lineHeightHeading3,color:t.colorTextBase}},".ant-form-item:last-child":{marginBottom:0},".instruction-container":{display:"flex",flexDirection:"column",gap:t.sizeXS}})))},48118:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(57801),o=s(72779),a=s.n(o),i=(s(2784),s(76699)),r=s(82575),l=s(52322);const c=(0,r.ZP)((({className:e,contents:t})=>{const{t:s}=(0,i.$)();return t.length<=0?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:a()("instruction-container",e),children:t.map(((e,t)=>(0,l.jsx)(n.e3,{description:"string"==typeof e.description?s(e.description):e.description,title:s(e.title),type:e.type||"warning"},t)))})})).withConfig({displayName:"InstructionContainer",componentId:"sc-1tjn6f7-0"})((({theme:{token:e}})=>({display:"flex",flexDirection:"column",gap:10,".alert-title.alert-title":{color:e.colorTextLight1}})))}}]);