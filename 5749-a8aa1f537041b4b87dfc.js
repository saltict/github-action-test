"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[5749],{15749:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var o=s(80949),a=s(36926),n=s(56858),l=s(57801),r=s(7559),i=s(75576),c=s(43557),d=s(73160),u=s(79385),m=s(4837),p=s(99656),h=s(1072),g=s(58094),k=s(12798),f=s(50007),b=s(81781),x=s(19201),y=s(61882),S=s(79100),v=s(75720),j=s(1780),C=s(94344),_=s(2784),w=s(35185),I=s(82575),Z=s(68774),A=s(52322);function z(e){if(!e)return[];const t=(0,a.q_)(e),s=[];return t.forEach((e=>{s.push({label:e.toString(),value:e})})),s}const F=()=>(0,A.jsx)(l.$_,{}),L=(0,I.ZP)((function({className:e=""}){const{t}=(0,c.$G)(),{goBack:s}=(0,c.yu)(),L=(0,_.useContext)(i.R0),N=(0,w.v9)((e=>e.settings.logoMaps.chainLogoMap)),{token:E}=(0,I.Fg)(),H=(0,c.lm)(),P=(0,_.useRef)(null),T=(0,c.c_)(),[M,R]=(0,_.useState)(""),[V,B]=(0,_.useState)(""),[X,D]=(0,_.useState)({status:""}),[K,O]=(0,_.useState)(!1),W=(0,c.vI)(),[$,q]=(0,_.useState)(""),[J,Y]=(0,_.useState)(""),[G,U]=(0,_.useState)(-1),Q=(0,c.xo)(M),ee=(0,_.useMemo)((()=>z(T[M])),[T,M]),te=(0,_.useCallback)((()=>{var e;const o=null===(e=P.current)||void 0===e?void 0:e.getFieldsValue(),l=(0,n.k1)(o.contractAddress,Q);O(!0),(0,d.fxK)({originChain:o.chain,slug:"",name:$,symbol:J,decimals:G,priceId:o.priceId||null,minAmount:null,assetType:o.type,metadata:(0,a.ST)(l),multiChainAsset:null,hasValue:(0,a.nO)(T[o.chain]),icon:"default.png"}).then((e=>{O(!1),e?(H({message:t("Imported token successfully")}),s()):H({message:t("An error occurred, please try again")})})).catch((()=>{O(!1),H({message:t("An error occurred, please try again")})}))}),[Q,$,J,G,T,H,t,s]),se=(0,_.useCallback)((()=>""===X.status||"error"===X.status),[X.status]),oe=(0,_.useCallback)(((e,s)=>new Promise(((e,a)=>{const l=[o.Ym.ERC20].includes(V)&&(0,Z.u)(s),r=[o.Ym.PSP22].includes(V)&&(0,n.NJ)(s),i=(0,n.k1)(s,Q);l||r?(O(!0),(0,d.UjR)({contractAddress:i,originChain:M,type:V}).then((s=>{O(!1),s.isExist&&(D({status:"error",message:t("Existed token")}),e()),s.contractError&&(D({status:"error",message:t("Error validating this token")}),e()),s.isExist||s.contractError||(D({status:"success"}),Y(s.symbol),U(s.decimals),q(s.name),e())})).catch((()=>{O(!1),D({status:"error",message:t("Error validating this token")}),e()}))):(D({status:"error"}),a(t("Invalid contract address")))}))),[Q,M,V,t]),ae=(0,_.useCallback)((()=>(0,A.jsx)(u.Z,{height:E.fontSizeXL,shape:"circle",src:N[M],width:E.fontSizeXL})),[N,M,E.fontSizeXL]),ne=(0,_.useCallback)((e=>{var t,s;null===(t=P.current)||void 0===t||t.setFieldValue("chain",e);const o=z(T[e]);var a,n;1===o.length?(null===(a=P.current)||void 0===a||a.setFieldValue("type",o[0].value),B(o[0].value)):(null===(n=P.current)||void 0===n||n.resetFields(["type"]),B("")),null===(s=P.current)||void 0===s||s.resetFields(["contractAddress"]),R(e),Y(""),U(-1),q(""),D({status:""})}),[T]),le=(0,_.useCallback)((e=>{var t,s;V!==e&&(null===(s=P.current)||void 0===s||s.resetFields(["contractAddress"]),Y(""),U(-1),q("")),null===(t=P.current)||void 0===t||t.setFieldValue("type",e),B(e)}),[V]),re=(0,_.useCallback)(((e,t)=>{const s=t.toLowerCase();return e.name.toLowerCase().includes(s)}),[]),ie=(0,_.useCallback)(((e,t)=>(0,A.jsx)(m.Z,{name:e.name,networkKey:e.slug,networkMainLogoShape:"circle",networkMainLogoSize:28,rightItem:t&&(0,A.jsx)(p.Z,{customSize:"20px",iconColor:E.colorSuccess,phosphorIcon:v.Z,type:"phosphor",weight:"fill"})})),[E]),ce=(0,_.useCallback)((e=>(0,A.jsx)("div",{className:"import_token__selected_option",children:e.name})),[]),de=(0,_.useCallback)(((e,t)=>(0,A.jsx)(h.Z,{className:"token-type-item",leftItemIcon:(0,A.jsx)(g.Z,{backgroundColor:"var(--token-type-icon-bg-color)",iconColor:"var(--token-type-icon-color)",phosphorIcon:j.Z,size:"sm",weight:"fill"}),name:e.label,rightItem:t&&(0,A.jsx)(p.Z,{iconColor:"var(--token-selected-icon-color)",phosphorIcon:v.Z,size:"sm",weight:"fill"})})),[]),ue=(0,_.useCallback)((e=>(0,A.jsx)("div",{className:"token_import__selected_option",children:e.label})),[]),me=(0,_.useCallback)((()=>{var e;const t=null===(e=P.current)||void 0===e?void 0:e.getFieldValue("contractAddress"),s=(0,Z.u)(t)?"ethereum":"polkadot";return(0,A.jsx)(S.Z,{identPrefix:42,size:E.fontSizeXL,theme:s,value:t})}),[E.fontSizeXL]);return(0,_.useEffect)((()=>{W(M)}),[W,M]),(0,A.jsx)(l.FE,{className:`import_token ${e}`,resolve:L.awaitStores(["assetRegistry"]),children:(0,A.jsx)(l.Ar.WithSubHeaderOnly,{onBack:s,rightFooterButton:{block:!0,disabled:se(),icon:(0,A.jsx)(p.Z,{phosphorIcon:C.Z,weight:"fill"}),loading:K,onClick:te,children:t("Import token")},title:t("Import token"),children:(0,A.jsx)("div",{className:"import_token__container",children:(0,A.jsxs)(k.Z,{className:"form-space-sm",initialValues:{contractAddress:"",chain:"",type:""},name:"token-import",ref:P,children:[(0,A.jsx)(k.Z.Item,{name:"chain",children:(0,A.jsx)(r.H,{className:e,id:"import-nft-select-chain",itemKey:"slug",items:Object.values(T),label:t("Network"),onSelect:ne,placeholder:t("Select network"),prefix:""!==M&&ae(),renderItem:ie,renderSelected:ce,renderWhenEmpty:F,searchFunction:re,searchMinCharactersCount:2,searchPlaceholder:t("Search network"),selected:M,title:t("Select network")})}),(0,A.jsx)(k.Z.Item,{name:"type",children:(0,A.jsx)(r.H,{className:e,disabled:""===M,id:"import-token-select-type",itemKey:"value",items:ee,label:t("Token type"),onSelect:le,placeholder:t("Select token type"),renderItem:de,renderSelected:ue,selected:V,title:t("Select token type")})}),(0,A.jsx)(k.Z.Item,{name:"contractAddress",rules:[{validator:oe}],statusHelpAsTooltip:!0,children:(0,A.jsx)(l.Jg,{...X.status&&"validating"!==X.status?{statusHelp:X.message,status:X.status}:{},addressPrefix:Q,disabled:""===V,label:t("Contract address"),showScanner:!0})}),(0,A.jsxs)(f.Z,{className:"token-symbol-decimals",gutter:E.margin,children:[(0,A.jsx)(b.Z,{span:12,children:(0,A.jsx)(x.Z,{content:J,placeholder:t("Symbol"),prefix:me(),tooltip:t("Symbol"),tooltipPlacement:"topLeft"})}),(0,A.jsx)(b.Z,{span:12,children:(0,A.jsx)(x.Z,{content:-1===G?"":G,placeholder:t("Decimals"),tooltip:t("Decimals"),tooltipPlacement:"topLeft"})})]}),(0,A.jsx)(k.Z.Item,{name:"priceId",statusHelpAsTooltip:!0,children:(0,A.jsx)(y.Z,{disabled:""===V,placeholder:t("Price ID"),tooltip:t("Price ID")})})]})})})})})).withConfig({displayName:"FungibleTokenImport",componentId:"sc-1qamwgi-0"})((({theme:{token:e}})=>({".import_token__container":{paddingTop:e.padding,marginLeft:e.margin,marginRight:e.margin},".import_token__selected_option":{color:e.colorTextHeading},".ant-field-container.ant-field-size-medium .ant-field-wrapper":{padding:e.paddingSM},".token-symbol-decimals":{marginBottom:e.margin},".token-type-item":{"--token-type-icon-bg-color":e["orange-6"],"--token-type-icon-color":e.colorWhite,"--token-selected-icon-color":e.colorSuccess,".ant-web3-block-right-item":{marginRight:0}},".token_import__selected_option":{fontSize:e.fontSizeHeading6,lineHeight:e.lineHeightHeading6,color:e.colorText},".web-ui-enable &":{".ant-sw-screen-layout-body":{paddingTop:e.paddingSM,flex:"0 0 auto",marginBottom:e.marginXS},".ant-form .ant-form-item:last-of-type":{marginBottom:0}}})))}}]);