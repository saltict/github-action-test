"use strict";(("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp=("undefined"!=typeof self?self:this).webpackChunk_subwallet_webapp||[]).push([[9638],{29638:(e,o,t)=>{t.r(o),t.d(o,{default:()=>v});var s=t(57801),a=t(76412),c=t(47088),n=t(73160),l=t(65024),i=t(12162),r=t(9130),d=t(99656),u=t(17446),h=t(42534),p=t(15322),k=t(90727),g=t(77180),m=t(59513),b=t(86267),f=t(12574),C=t(2784),w=t(76699),y=t(35185),N=t(73557),j=t(82575),A=t(68774),M=t(52322);const Z="actionModalId";function x({accountAuthType:e,authInfo:o,className:t="",goBack:c,origin:N,siteName:x}){const v=(0,y.v9)((e=>e.accountState.accounts)),[B,I]=(0,C.useState)({}),{activeModal:S,inactiveModal:L}=(0,C.useContext)(i.t),{t:_}=(0,w.$)(),{token:E}=(0,j.Fg)(),T=(0,C.useMemo)((()=>{const o=v.filter((e=>"ALL"!==e.address));return"substrate"===e?o.filter((e=>!(0,A.u)(e.address))):"evm"===e?o.filter((e=>(0,A.u)(e.address))):o}),[e,v]),W=(0,C.useCallback)((()=>{S(Z)}),[S]),Y=(0,C.useCallback)((()=>{L(Z)}),[L]),F=(0,C.useMemo)((()=>{const e=o.isAllowed,t=[{key:e?"block":"unblock",icon:e?h.Z:p.Z,iconBackgroundColor:e?E.colorError:E.colorSuccess,title:_(e?"Block this site":"Unblock this site"),onClick:()=>{(0,n.jOZ)(N).then((({list:e})=>{(0,l.NY)(e)})).catch(console.error),Y()}},{key:"forget-site",icon:k.Z,iconBackgroundColor:E.colorWarning,title:_("Forget this site"),onClick:()=>{(0,n.hW$)(N,l.NY).catch(console.error),Y()}}];return e&&t.push({key:"disconnect-all",icon:g.Z,iconBackgroundColor:E["gray-3"],title:_("Disconnect all accounts"),onClick:()=>{(0,n.mpM)(!1,N,l.NY).catch(console.error),Y()}},{key:"connect-all",icon:m.Z,iconBackgroundColor:E["green-6"],title:_("Connect all accounts"),onClick:()=>{(0,n.mpM)(!0,N,l.NY).catch(console.error),Y()}}),t}),[o.isAllowed,Y,N,_,E]),z=(0,C.useCallback)((e=>{const t=o.isAllowedMap[e.address];return(0,M.jsx)(s.HL,{accountName:e.name,address:e.address,avatarSize:E.sizeLG,rightItem:(0,M.jsx)(r.Z,{checked:void 0===B[e.address]?t:B[e.address],disabled:!o.isAllowed||void 0!==B[e.address],onClick:()=>{I((o=>({...o,[e.address]:!t}))),(0,n.jvR)(e.address,!t,N,l.NY).catch(console.log).finally((()=>{I((o=>{const t={...o};return delete t[e.address],t}))}))},style:{marginRight:8}})},e.address)}),[o.isAllowed,o.isAllowedMap,N,B,E.sizeLG]),D=(0,C.useCallback)(((e,o)=>{const t=o.toLowerCase();return e.address.toLowerCase().includes(t)||!!e.name&&e.name.toLowerCase().includes(t)}),[]);(0,C.useEffect)((()=>{I((e=>Object.keys(e).length?{}:e))}),[o]);const H=(0,C.useCallback)((()=>(0,M.jsx)(s.rf,{emptyMessage:_("Your accounts will appear here."),emptyTitle:_("No account found"),phosphorIcon:b.Z})),[_]);return(0,M.jsx)(s.FE,{className:`manage-website-access-detail ${t}`,children:(0,M.jsxs)(s.Ar.WithSubHeaderOnly,{onBack:c,subHeaderIcons:[{icon:(0,M.jsx)(d.Z,{phosphorIcon:f.Z,size:"md",type:"phosphor",weight:"bold"}),onClick:W}],title:x||o.id,children:[(0,M.jsx)(u.Z.Section,{displayRow:!0,enableSearchInput:!0,list:T,renderItem:z,renderWhenEmpty:H,rowGap:"8px",searchFunction:D,searchMinCharactersCount:2,searchPlaceholder:_("Search account")}),(0,M.jsx)(a.W,{actions:F,className:`${t} action-modal`,id:Z,onCancel:Y,title:_("dApp configuration")})]})})}const v=(0,j.ZP)((function(e){const o=(0,N.TH)(),{accountAuthType:t,origin:s,siteName:a}=o.state,n=(0,y.v9)((e=>e.settings.authUrls[s])),l=(0,c.Z)().goBack;return(0,C.useEffect)((()=>{n||l()}),[l,n]),(0,M.jsx)(M.Fragment,{children:!!n&&(0,M.jsx)(x,{...e,accountAuthType:t,authInfo:n,goBack:l,origin:s,siteName:a})})})).withConfig({displayName:"Detail__ManageWebsiteAccessDetail",componentId:"sc-kvk64y-0"})((({theme:{token:e}})=>({".ant-sw-list-section":{height:"100%"},"&.manage-website-access-detail":{backgroundColor:e.colorBgDefault},".ant-sw-screen-layout-body":{paddingTop:e.paddingSM},"&.action-modal":{".__action-item.block .ant-setting-item-name":{color:e.colorError}}})))}}]);